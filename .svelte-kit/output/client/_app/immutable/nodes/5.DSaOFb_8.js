import"../chunks/DsnmJJEf.js";import"../chunks/OiL74QB5.js";import{aa as Z,ab as F,ac as N,g as t,a as w,ad as ee,ae as s,ag as l,af as i,m as f,n as te,s as o,ai as G}from"../chunks/DFUQbp1x.js";import{e as _,s as se}from"../chunks/BrEPatKm.js";import{i as j}from"../chunks/Rfqus09g.js";import{r as B,s as ie}from"../chunks/9XHtB8tL.js";import{s as M}from"../chunks/C8k8eT28.js";import{t as ae,s as re}from"../chunks/6L04T-A-.js";import{b as R}from"../chunks/CzZhIt5y.js";import{i as oe}from"../chunks/Dw2NSaBM.js";import{g as U}from"../chunks/Dd8LfxSm.js";var le=G('<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg>'),ne=G('<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"></path><line x1="1" y1="1" x2="23" y2="23"></line></svg>'),ve=F('<div class="message-container error svelte-1i2smtp"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line></svg> <span> </span></div>'),pe=F(`<div class="app-screen svelte-1i2smtp"><div class="scroll-container svelte-1i2smtp"><div class="content-wrapper svelte-1i2smtp"><div class="login-card svelte-1i2smtp"><div class="title-section svelte-1i2smtp"><h1 class="main-title svelte-1i2smtp">NISIT<br/>LOGIN TO ACCOUNT</h1> <p class="sub-title svelte-1i2smtp">Welcome back! Please enter your details.</p></div> <div class="form-section svelte-1i2smtp"><div class="form-group svelte-1i2smtp"><label class="label svelte-1i2smtp" for="email">Email</label> <div><input id="email" type="email" placeholder="Enter your email" class="svelte-1i2smtp"/></div></div> <div class="form-group svelte-1i2smtp"><div class="password-header svelte-1i2smtp"><label class="label svelte-1i2smtp" for="password">Password</label> <a href="/auth/forget" class="forgot-link svelte-1i2smtp">Forgot ?</a></div> <div><input id="password" placeholder="Enter your password" class="svelte-1i2smtp"/> <button type="button" class="toggle-password svelte-1i2smtp" aria-label="Toggle Password Visibility"><!></button></div></div> <!> <button class="login-button svelte-1i2smtp" type="button">LOGIN NOW</button> <div class="signup-section svelte-1i2smtp"><span class="signup-text svelte-1i2smtp">Don't have an account?</span> <a href="/auth/register" class="signup-link svelte-1i2smtp">Sign up</a></div></div></div></div></div></div>`);function xe(J,W){Z(W,!1);let v=f(""),g=f(""),h=f(!1),n=f(""),p,c=f(null);function $(){o(h,!t(h))}function z(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}function b(){o(c,null),t(n)&&(o(n,""),p&&clearTimeout(p))}function d(e,a){p&&clearTimeout(p),o(n,e),o(c,a),p=setTimeout(()=>{o(n,""),o(c,null)},3e3)}async function D(){if(b(),!t(v))return d("Please enter your email.","email");if(!z(t(v)))return d("Invalid email format.","email");if(!t(g))return d("Please enter your password.","password");try{const u=await fetch("http://158.108.102.14:8001/api/users/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t(v),password:t(g)})}),r=await u.json().catch(()=>({}));if(!u.ok){const Y=r.detail?typeof r.detail=="string"?r.detail:"Login failed.":"Login failed. Please check your credentials.";return d(Y,"password")}const X={id:r.user_id,email:r.email,name:r.name,role:r.role};localStorage.setItem("user_info",JSON.stringify(X)),(r.role||"").toLowerCase()==="officer"?await U("/officer/create-event",{replaceState:!0}):await U("/student/event-list",{replaceState:!0})}catch(e){console.error("Login Error:",e),d("Cannot connect to server. Please try again later.","email")}}oe();var y=pe(),A=s(y),E=s(A),L=s(E),C=l(s(L),2),k=s(C),x=l(s(k),2),P=s(x);B(P),i(x),i(k);var I=l(k,2),S=l(s(I),2),m=s(S);B(m);var T=l(m,2),V=s(T);{var q=e=>{var a=le();w(e,a)},H=e=>{var a=ne();w(e,a)};j(V,e=>{t(h)?e(q):e(H,!1)})}i(T),i(S),i(I);var O=l(I,2);{var K=e=>{var a=ve(),u=l(s(a),2),r=s(u,!0);i(u),i(a),N(()=>se(r,t(n))),ae(3,a,()=>re,()=>({duration:200})),w(e,a)};j(O,e=>{t(n)&&e(K)})}var Q=l(O,2);te(2),i(C),i(L),i(E),i(A),i(y),N(()=>{M(x,1,`input-field ${t(c)==="email"?"error":""}`,"svelte-1i2smtp"),M(S,1,`input-field password-field ${t(c)==="password"?"error":""}`,"svelte-1i2smtp"),ie(m,"type",t(h)?"text":"password")}),R(P,()=>t(v),e=>o(v,e)),_("input",P,b),R(m,()=>t(g),e=>o(g,e)),_("input",m,b),_("click",T,$),_("click",Q,D),w(J,y),ee()}export{xe as component};
