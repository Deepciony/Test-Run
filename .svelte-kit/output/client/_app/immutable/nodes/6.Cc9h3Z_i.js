import"../chunks/DsnmJJEf.js";import"../chunks/OiL74QB5.js";import{aa as mt,aj as Ze,ak as ft,ab as k,ac as B,g as e,a as p,ad as bt,ae as r,s,m as d,ag as n,af as a,u as j,al as Ge,ai as ie}from"../chunks/DFUQbp1x.js";import{e as m,s as F}from"../chunks/BrEPatKm.js";import{e as xe,i as Se}from"../chunks/CGjZIjMg.js";import{i as O}from"../chunks/Rfqus09g.js";import{r as ae,s as gt}from"../chunks/9XHtB8tL.js";import{s as f}from"../chunks/C8k8eT28.js";import{s as _t}from"../chunks/p9-3KeKv.js";import{t as L,s as V}from"../chunks/6L04T-A-.js";import{b as re}from"../chunks/CzZhIt5y.js";import{i as ht}from"../chunks/Dw2NSaBM.js";import{g as jt}from"../chunks/Dd8LfxSm.js";var yt=k('<button type="button" class="option-item svelte-8bdjn9"> </button>'),wt=k('<div class="options-list svelte-8bdjn9"></div>'),kt=k('<button type="button" class="option-item svelte-8bdjn9"> </button>'),xt=k('<div class="options-list svelte-8bdjn9"></div>'),St=k('<div><div class="form-group svelte-8bdjn9"><label class="label svelte-8bdjn9" for="nisitId">Nisit ID</label> <div><input type="text" placeholder="Nisit ID" maxlength="10" class="svelte-8bdjn9"/></div></div> <div class="form-group svelte-8bdjn9"><label class="label svelte-8bdjn9" for="faculty-dropdown">Faculty</label> <div class="custom-select-container svelte-8bdjn9"><button id="faculty-dropdown" type="button"><span> </span> <div><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M6 9l6 6 6-6"></path></svg></div></button> <!></div></div> <div class="form-group svelte-8bdjn9"><label class="label svelte-8bdjn9" for="major-dropdown">Major</label> <div><button id="major-dropdown" type="button"><span> </span> <div><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M6 9l6 6 6-6"></path></svg></div></button> <!></div></div></div>'),Mt=k('<button type="button" class="option-item svelte-8bdjn9"> </button>'),At=k('<div class="options-list svelte-8bdjn9"></div>'),Ct=k('<div><div class="form-group svelte-8bdjn9"><label class="label svelte-8bdjn9" for="dept-dropdown">Department</label> <div class="custom-select-container svelte-8bdjn9"><button id="dept-dropdown" type="button"><span> </span> <div><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M6 9l6 6 6-6"></path></svg></div></button> <!></div></div></div>'),Et=ie('<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg>'),It=ie('<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"></path><line x1="1" y1="1" x2="23" y2="23"></line></svg>'),Pt=ie('<svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line></svg>'),Tt=ie('<svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><polyline points="22 4 12 14.01 9 11.01"></polyline></svg>'),Nt=k("<div><!> <span> </span></div>"),Dt=k('<div class="app-screen svelte-8bdjn9"><div class="glass-header svelte-8bdjn9"><a href="/auth/login" class="back-btn svelte-8bdjn9" aria-label="Back"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="19" y1="12" x2="5" y2="12"></line><polyline points="12 19 5 12 12 5"></polyline></svg></a> <h1 class="page-title svelte-8bdjn9">CREATE ACCOUNT</h1></div> <div class="scroll-container svelte-8bdjn9"><div class="content-wrapper svelte-8bdjn9"><div class="form-card svelte-8bdjn9"><div class="role-switcher-container svelte-8bdjn9"><div class="segmented svelte-8bdjn9" role="tablist"><div class="indicator svelte-8bdjn9"></div> <button type="button"><span>Student</span></button> <button type="button"><span>Officer</span></button></div></div> <div class="form-section svelte-8bdjn9"><div class="form-group svelte-8bdjn9"><label class="label svelte-8bdjn9" for="fullname">Full Name</label> <div><input id="fullname" type="text" placeholder="Enter your name" class="svelte-8bdjn9"/></div></div> <div class="form-group svelte-8bdjn9"><label class="label svelte-8bdjn9" for="email">Email</label> <div><input id="email" type="email" placeholder="Enter your email" class="svelte-8bdjn9"/></div></div> <!> <div class="form-group svelte-8bdjn9"><label class="label svelte-8bdjn9" for="password">Password</label> <div><input id="password" placeholder="Enter your password" class="svelte-8bdjn9"/> <button type="button" class="toggle-password svelte-8bdjn9"><!></button></div></div> <!> <button class="primary-btn svelte-8bdjn9" type="button">SIGN UP</button></div></div></div></div></div>');function Xt(Je,Le){mt(Le,!1);const Ve="http://158.108.102.14:8001";let y=d("student"),Me=d(),X=d(""),$=d(""),R=d(""),Y=d(!1),q=d(""),b=d(""),M=d(""),K=d(""),A=d(!1),C=d(!1),N=d(!1),o=d({fullName:!1,email:!1,nisitId:!1,faculty:!1,major:!1,department:!1,password:!1});const Ae=[{id:"management",name:"Management Sciences"},{id:"engineering",name:"Engineering at Sriracha"},{id:"science",name:"Science at Sriracha"},{id:"economics",name:"Economics at Sriracha"},{id:"maritime",name:"International Maritime Studies"}],Ce={management:[{id:"mgt",name:"Management"},{id:"fin",name:"Finance"},{id:"ib",name:"International Business"},{id:"acc",name:"Accounting"}],engineering:[{id:"cpe",name:"Computer Engineering"},{id:"me",name:"Mechanical Engineering"},{id:"ie",name:"Industrial Engineering"},{id:"ee",name:"Electrical Engineering"}],science:[{id:"cs",name:"Computer Science"},{id:"it",name:"Information Technology"}],economics:[{id:"econ",name:"Economics"}],maritime:[{id:"ns",name:"Nautical Science"}]},Xe=[{id:"Academic Affairs",name:"Academic Affairs"},{id:"Student Affairs",name:"Student Affairs"},{id:"Registrar Office",name:"Registrar Office"},{id:"Finance Department",name:"Finance Department"},{id:"IT Support Center",name:"IT Support Center"},{id:"Human Resources",name:"Human Resources"}];let ee=d([]),z=d(""),se=d("error"),Q;function qe(t){s(b,t),s(M,""),s(A,!1),E()}function x(t){Ge(o,e(o)[t]=!0),setTimeout(()=>Ge(o,e(o)[t]=!1),3e3)}function Ke(t){s(M,t),s(C,!1),E()}function Qe(t){s(K,t),s(N,!1),E()}function We(t){const i=Ae.find(l=>l.id===t);return i?i.name:"Select Faculty"}function Ye(t){const i=e(ee).find(l=>l.id===t);return i?i.name:"Select Major"}function Ee(t){e(y)!==t&&(s(y,t),s(A,!1),s(C,!1),s(N,!1),E())}function _(t,i="error"){Q&&clearTimeout(Q),s(z,t),s(se,i),Q=setTimeout(()=>s(z,""),3e3)}function E(){e(z)&&(s(z,""),Q&&clearTimeout(Q))}function et(t){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)}function tt(t){return/^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{8,}$/.test(t)}async function at(){if(E(),!e(X))return x("fullName"),_("Please enter your full name.");if(!e($))return x("email"),_("Please enter your email.");if(!et(e($)))return x("email"),_("Invalid email format.");if(e(y)==="student"){if(!e(q))return x("nisitId"),_("Please enter your Nisit ID.");if(!e(b))return x("faculty"),_("Please select a faculty.");if(!e(M))return x("major"),_("Please select a major.")}else if(!e(K))return x("department"),_("Please select your department.");if(!e(R))return x("password"),_("Please enter a password.");if(!tt(e(R))){x("password"),_("Password must be at least 8 chars & include a number.");return}try{const t=e(y)==="student"?{email:e($),name:e(X),role:e(y),password:e(R),nisit_id:e(q),major:e(M),faculty:e(b),department:null}:{email:e($),name:e(X),role:e(y),password:e(R),nisit_id:null,major:null,faculty:null,department:e(K)};console.log("Payload sent â†’",t);const i=await fetch(`${Ve}/api/users/register`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!i.ok){const l=await i.json().catch(()=>null);let h="Register failed.";if(l?.detail){if(typeof l.detail=="string")h=l.detail;else if(Array.isArray(l.detail)&&l.detail.length>0){const v=l.detail[0];h=`${v.loc?v.loc[v.loc.length-1]:""}: ${v.msg}`}}return _(h,"error")}_("Sign up successful!","success"),setTimeout(()=>jt("/auth/login"),1e3)}catch(t){console.error(t),_("Cannot connect to server.","error")}}Ze(()=>e(y),()=>{s(Me,e(y)==="student"?"0%":"calc(100% + 8px)")}),Ze(()=>e(b),()=>{e(b)&&Ce[e(b)]?s(ee,Ce[e(b)]):s(ee,[])}),ft(),ht();var ne=Dt(),Ie=n(r(ne),2),Pe=r(Ie),Te=r(Pe),le=r(Te),Ne=r(le),De=r(Ne),oe=n(De,2);let Be;var Fe=n(oe,2);let Oe;a(Ne),a(le);var $e=n(le,2),de=r($e),ve=n(r(de),2),ce=r(ve);ae(ce),a(ve),a(de);var ue=n(de,2),pe=n(r(ue),2),me=r(pe);ae(me),a(pe),a(ue);var Re=n(ue,2);{var rt=t=>{var i=St(),l=r(i),h=n(r(l),2),v=r(h);ae(v),a(h),a(l);var w=n(l,2),I=n(r(w),2),u=r(I);let P;var H=r(u),_e=r(H,!0);a(H);var he=n(H,2);let U;a(u);var Z=n(u,2);{var je=g=>{var c=wt();xe(c,5,()=>Ae,Se,(we,D)=>{var S=yt(),ke=r(S,!0);a(S),B(()=>F(ke,(e(D),j(()=>e(D).name)))),m("click",S,()=>qe(e(D).id)),p(we,S)}),a(c),L(3,c,()=>V,()=>({duration:150})),p(g,c)};O(Z,g=>{e(A)&&g(je)})}a(I),a(w);var G=n(w,2),T=n(r(G),2);let te;var J=r(T);let He;var ye=r(J),vt=r(ye,!0);a(ye);var ct=n(ye,2);let Ue;a(J);var ut=n(J,2);{var pt=g=>{var c=xt();xe(c,5,()=>e(ee),Se,(we,D)=>{var S=kt(),ke=r(S,!0);a(S),B(()=>F(ke,(e(D),j(()=>e(D).name)))),m("click",S,()=>Ke(e(D).id)),p(we,S)}),a(c),L(3,c,()=>V,()=>({duration:150})),p(g,c)};O(ut,g=>{e(C)&&g(pt)})}a(T),a(G),a(i),B((g,c)=>{f(h,1,`input-field ${e(o),j(()=>e(o).nisitId?"error":"")??""}`,"svelte-8bdjn9"),P=f(u,1,`select-trigger ${e(o),j(()=>e(o).faculty?"error":"")??""}`,"svelte-8bdjn9",P,{placeholder:!e(b),active:e(A)}),F(_e,g),U=f(he,1,"arrow-icon svelte-8bdjn9",null,U,{rotate:e(A)}),te=f(T,1,"custom-select-container svelte-8bdjn9",null,te,{disabled:!e(b)}),He=f(J,1,`select-trigger ${e(o),j(()=>e(o).major?"error":"")??""}`,"svelte-8bdjn9",He,{placeholder:!e(M),active:e(C)}),J.disabled=!e(b),F(vt,c),Ue=f(ct,1,"arrow-icon svelte-8bdjn9",null,Ue,{rotate:e(C)})},[()=>(e(b),j(()=>e(b)?We(e(b)):"Select Faculty")),()=>(e(M),j(()=>e(M)?Ye(e(M)):"Select Major"))]),re(v,()=>e(q),g=>s(q,g)),m("input",v,g=>{const c=g.target;c.value=c.value.replace(/\D/g,"").slice(0,10),s(q,c.value)}),m("click",u,()=>{s(A,!e(A)),s(C,!1)}),m("click",J,()=>{s(C,!e(C)),s(A,!1)}),L(3,i,()=>V,()=>({duration:200})),p(t,i)},it=t=>{var i=Ct(),l=r(i),h=n(r(l),2),v=r(h);let w;var I=r(v),u=r(I,!0);a(I);var P=n(I,2);let H;a(v);var _e=n(v,2);{var he=U=>{var Z=At();xe(Z,5,()=>Xe,Se,(je,G)=>{var T=Mt(),te=r(T,!0);a(T),B(()=>F(te,(e(G),j(()=>e(G).name)))),m("click",T,()=>Qe(e(G).id)),p(je,T)}),a(Z),L(3,Z,()=>V,()=>({duration:150})),p(U,Z)};O(_e,U=>{e(N)&&U(he)})}a(h),a(l),a(i),B(()=>{w=f(v,1,`select-trigger ${e(o),j(()=>e(o).department?"error":"")??""}`,"svelte-8bdjn9",w,{placeholder:!e(K),active:e(N)}),F(u,e(K)||"Select Department"),H=f(P,1,"arrow-icon svelte-8bdjn9",null,H,{rotate:e(N)})}),m("click",v,()=>s(N,!e(N))),L(3,i,()=>V,()=>({duration:200})),p(t,i)};O(Re,t=>{e(y)==="student"?t(rt):t(it,!1)})}var fe=n(Re,2),be=n(r(fe),2),W=r(be);ae(W);var ge=n(W,2),st=r(ge);{var nt=t=>{var i=Et();p(t,i)},lt=t=>{var i=It();p(t,i)};O(st,t=>{e(Y)?t(nt):t(lt,!1)})}a(ge),a(be),a(fe);var ze=n(fe,2);{var ot=t=>{var i=Nt(),l=r(i);{var h=u=>{var P=Pt();p(u,P)},v=u=>{var P=Tt();p(u,P)};O(l,u=>{e(se)==="error"?u(h):u(v,!1)})}var w=n(l,2),I=r(w,!0);a(w),a(i),B(()=>{f(i,1,`message-container ${e(se)??""}`,"svelte-8bdjn9"),F(I,e(z))}),L(3,i,()=>V,()=>({duration:200})),p(t,i)};O(ze,t=>{e(z)&&t(ot)})}var dt=n(ze,2);a($e),a(Te),a(Pe),a(Ie),a(ne),B(()=>{_t(De,`transform: translateX(${e(Me)??""});`),Be=f(oe,1,"option svelte-8bdjn9",null,Be,{active:e(y)==="student"}),Oe=f(Fe,1,"option svelte-8bdjn9",null,Oe,{active:e(y)==="officer"}),f(ve,1,`input-field ${e(o),j(()=>e(o).fullName?"error":"")??""}`,"svelte-8bdjn9"),f(pe,1,`input-field ${e(o),j(()=>e(o).email?"error":"")??""}`,"svelte-8bdjn9"),f(be,1,`input-field ${e(o),j(()=>e(o).password?"error":"")??""}`,"svelte-8bdjn9"),gt(W,"type",e(Y)?"text":"password")}),m("click",oe,()=>Ee("student")),m("click",Fe,()=>Ee("officer")),re(ce,()=>e(X),t=>s(X,t)),m("input",ce,E),re(me,()=>e($),t=>s($,t)),m("input",me,E),re(W,()=>e(R),t=>s(R,t)),m("input",W,E),m("click",ge,()=>s(Y,!e(Y))),m("click",dt,at),p(Je,ne),bt()}export{Xt as component};
